<?xml version='1.0' encoding='utf-8'?>
<section xml:id="installation" xmlns:xi="http://www.w3.org/2001/XInclude">
      <title>Installation</title>
      <subsection>
        <title>Python</title>
        <p>PreTeXt-CLI requires Python version 
        <xi:include href="../pretext/static/MINIMUM_PYTHON_VERSION"
        parse="text" /> or better.</p>
        <p>To check your version, type this into your terminal or command
        prompt:</p>
        <cd>python -V</cd>
        <p>If your version is 2.x, try this instead (and if so, either replace
        all future references to <c>python</c> in these instructions with <c>python3</c>,
        or try 
        <url href="https://askubuntu.com/a/321000">this</url>).</p>
        <cd>python3 -V</cd>
        <p>If you don't have a compatible Python available, try one of
        these:</p>
        <ul>
          <li>
            <url>https://www.python.org/downloads/</url>
              <ul><li>Windows warning: Be sure to select the option adding Python to your Path.</li></ul>
          </li>
          <li>
          <url>https://github.com/pyenv/pyenv#installation</url> (Mac/Linux) or 
          <url>
          https://github.com/pyenv-win/pyenv-win#installation</url> (Windows)</li>
        </ul>
      </subsection>
      <subsection>
        <title>Other Dependencies</title>
        <p>Some features of PreTeXt rely on some non-Python applications. TODO:
        Document these.</p>
      </subsection>
      <subsection>
        <title>PreTeXt-CLI</title>
        <p>Once you've confirmed that you're using a valid version of Python,
        just run (replacing <c>python</c> with <c>python3</c> if necessary):</p>
        <cd>python -m pip install --user pretextbook</cd>
        <aside>
        <p>If you get an error such as
        <c>No module named pip.</c> then
        <url href="https://pip.pypa.io/en/stable/installing/">install pip</url>.
        </p>
        <p>It's also possible you may get an error like
        <c>error: invalid command 'bdist_wheel'</c>
        <mdash /> good news, you can ignore it!).</p>
        </aside>
        <p>After installation, try to run:</p>
        <cd>pretext --help</cd>
        <p>If that works, great! Otherwise, it likely means that Python packages aren't
        available on your <q>PATH</q>.</p>
        <ul>
            <li>
                <p>
One option is to try running <c>python -m pretext --help</c>. If that works,
then you can use <c>python -m pretext</c> in place of <c>pretext</c>, and you
won't need to do anything further.
                </p>
            </li>
            <li>
        <p>To fix your <q>PATH</q> on Linux/Mac, run the following commands:</p>
        <cd>
<![CDATA[echo "export PATH=\"`python -m site --user-base`/bin:$PATH\"" >> ~/.bash_profile
echo "export PATH=\"`python -m site --user-base`/bin:$PATH\"" >> ~/.zprofile]]>
        </cd>
            </li>
            <li>
        <p>To fix your <q>PATH</q> on Windows, open your Windows Control Panel, search for <q>environment</q>,
        and select <q>Edit environment variables for your account</q></p>
        <p>Then edit your PATH variable and add the following line (replacing <c>3x</c> with the
        version of Python you installed, e.g. <c>38</c> for version <c>3.8</c>):</p>
        <cd>%USERPROFILE%\AppData\Roaming\Python\Python3x\Scripts</cd>
            </li>
          </ul>
        <p>Then close and reopen your command line and try 
        <c>pretext --help</c>again.</p>
      </subsection>
        <subsection>
            <title>Upgrading</title>
            <p>
The most recent version of PreTeXt-CLI is
<xi:include href="../pretext/static/VERSION" parse="text" />.
Use <c>pretext --version</c> to see the version you're running.
            </p>
            <p>
To upgrade your version, run the following:
            </p>
        <cd>python -m pip install --user pretextbook --upgrade</cd>
        </subsection>
</section>
